package com.ROTH.Framwork;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.util.ArrayList;

import javax.swing.JPanel;


public class ROTHDesktopLevelPanel extends JPanel implements ROTHPanel {
	
	/**
	 * 
	 */
	private static final long serialVersionUID = -7716687111718904098L;
	private ArrayList<ArrayList<Image>> map = new ArrayList<ArrayList<Image>>();
	private ROTHLevelActor user = new ROTHLevelActor("User", null,this.getWidth()/2,this.getHeight()/2);
	private ArrayList<ROTHLevelActor> actors = new ArrayList<ROTHLevelActor>();
	private ROTHController controller=null;
	private int Xoffset=0;
	private int Yoffset=0;
	
	public ROTHDesktopLevelPanel(ArrayList<ArrayList<Image>> map, ROTHController controller){
		
		super();
		this.setBackground(Color.BLACK);
		this.map = map;
		this.controller = controller;
		
	}
	


	public void paint(Graphics g0) {
			
		super.paint(g0);
		
		Logic();
		
		int Xscale = 32;
		int Yscale = 32;
		
		int ratio = this.getSize().width/this.getSize().height;
		
		Xscale = this.getSize().width/32;
		Yscale = this.getSize().height/(32*.ratio);
		
		Graphics2D g2d = (Graphics2D) g0;
		
		for(int x = 0; x<50; x++){
			for(int y = 0; y < 50; y++){
		
			g2d.drawImage(map.get(x).get(y), Xoffset+x*Xscale, Yoffset+y*Yscale, Xscale, Yscale,
				null);
			}
		}

		g2d.fillOval((int)user.getPosX(), (int)user.getPosY(), 100, 100);
		
	}
	
	public void Logic(){
		
		int x = controller.getDirX();
		int y = controller.getDirY();
		
		if(controller.getDirX() >= 1 && user.getPosX() > this.getSize().width*5/6){
			Xoffset--;
			x=0;;
		}
		
		if(controller.getDirX() <= -1 && user.getPosX() < this.getSize().width*1/6){
			Xoffset++;
			x=0;;
		}
		if(controller.getDirY() == 1 && user.getPosY() > this.getSize().height*5/6){
			Yoffset--;
			y=0;;
		}
		
		if(controller.getDirY() == -1 && user.getPosY() < this.getSize().height*1/6){
			Yoffset++;
			y=0;;
		}
		
		user.move(x,y);
		
		//System.out.println(user.getPosX()+"  "+user.getPosY());
		
	}



	public ArrayList<ROTHLevelActor> getActors() {
		return actors;
	}



	public void setActors(ArrayList<ROTHLevelActor> actors) {
		this.actors = actors;
	}



	@Override
	public void setMap(ArrayList<ArrayList<Image>> map) {
		this.map = map;
		
	}

	
	


}
